var backend_url="http://127.0.0.1:5000/",previous_data={summary_text:"",summaty_link_text:""},element_prefixes={source_summary_output:"Source summary: "},ids_for_tasks={summarize:0,get_artlicle_by_link:1},allowed_websites=["bbc.com","nytimes.com"];function check_if_input_is_valid(e){return!!e}function insert_the_text_in_frontend_field(e,t){document.getElementById(t).textContent=element_prefixes[t]+e}function fetch_data_from_backend(e,t){t={id:ids_for_tasks[t],text:e},e=new XMLHttpRequest;return e.open("POST",backend_url),e.setRequestHeader("Content-Type","application/json"),e.send(JSON.stringify(t)),e}function summarize_inputted_text(){var e=document.getElementById("source_text").value;e!=previous_data.summary_text&&check_if_input_is_valid(e)?(xhr=fetch_data_from_backend(e,"summarize"),xhr.onload=function(){insert_the_text_in_frontend_field(JSON.parse(xhr.response).text,"source_summary_output")},previous_data.summary_text=e):console.log("Text is not valid or didn't change")}function check_inputed_website(e){for(var t=!1,_=0;_<allowed_websites.length;_++)e.includes(allowed_websites[_])&&(t=!0);return t}function get_the_text_from_website_or_ask_for_it(){var e=document.getElementById("source_link").value,t=check_if_input_is_valid(e),_=check_inputed_website(e);if(_&&t&&previous_data.summaty_link_text!=e)document.getElementById("source_text_block").style.height=0,document.getElementById("source_warning_text").style.display="none",previous_data.summaty_link_text=e,xhr=fetch_data_from_backend(e,"get_artlicle_by_link"),xhr.onload=function(){var e=JSON.parse(xhr.response).text;document.getElementById("source_text").value=e};else if(t||_){if(t&&!_){document.getElementById("source_warning_text").style.display="block";for(var n=0;n<=100;n++)document.getElementById("source_text_block").style.height=n+"%"}}else document.getElementById("source_text_block").style.height=0,document.getElementById("source_warning_text").style.display="none"}setInterval(summarize_inputted_text,1e3),setInterval(get_the_text_from_website_or_ask_for_it,1e3);